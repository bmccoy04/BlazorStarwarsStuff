@page "/TodoV3"
@using StarwarsStuff.Ui.Models

<h3>TodoV2</h3>

<h3>Todo (@todos.Count(todo => !todo.IsDone))</h3>

<TodoInputV3 AddTodo="@AddTodo" />

<br />

<TodoTableV3 Todos="todos" MarkDone="@((x) => MarkDone(x))"></TodoTableV3>

<Pagination PageLeft="PageLeft" PageRight="PageRight" PageSelected="PageSelected" Data="todos" />


@code {
    
   private IList<TodoItem> todos = new List<TodoItem>();
   
   private void AddTodo(string newTodo)
   {
      if (!string.IsNullOrWhiteSpace(newTodo))
      {
         todos.Add(new TodoItem() { Title = newTodo });
      }
   }

   private void MarkDone(string title)
   {
      var todo = todos.FirstOrDefault(x => x.Title == title && !x.IsDone);

      if(todo != null)
         todo.IsDone = true;
   }

   private void PageLeft()
   {
      
   }

   private void PageRight()
   {
   }
   
   private void PageSelected() {}

}
